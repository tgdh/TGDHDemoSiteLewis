@inherits UmbracoViewPage<IPublishedContent>
@{
	var homePage = Model.Site();
    var settings = homePage.Descendants("globalSettings").FirstOrDefault();
	var contactNumber = settings.GetPropertyValue<IEnumerable<IPublishedContent>>("contactNumbers");
	var firstNumber = "";
	foreach(var contact in contactNumber.Take(1))
	{
		firstNumber = contact.GetPropertyValue<string>("number");
	}
	var teamMembers = Model.GetPropertyValue<IEnumerable<IPublishedContent>>("teamMembersList");
	if(teamMembers == null)
	{
		return;
	}
}
<div class="c-our-team o-section c-rte">
	<div class="o-wrap o-wrap--large u-clearfix">
		<h2 class="c-our-team__title u-beta">Our Team</h2>
		@if(!string.IsNullOrWhiteSpace(firstNumber))
		{
			<a href="@firstNumber.Replace(" ", "")" class="c-our-team__contact u-gamma">@firstNumber</a>
		}
		<div class="c-our-team__wrapper u-clearfix">
			@foreach(var item in teamMembers)
			{
				var image = item.GetPropertyValue<int>("memberImage");
				var name  = item.GetPropertyValue<string>("memberName");
				var email = item.GetPropertyValue<string>("memberEmail");
				var phone = item.GetPropertyValue<string>("memberPhoneExt");
				var job   = item.GetPropertyValue<string>("memberJobTitle");
				<div class="c-our-team__item">
					@* Only Render item if there is an image *@
					@if(image != 0)
					{
						<div class="c-our-team__image">
							<img src="@Umbraco.TypedMedia(image).GetCropUrl("3:4")" class="c-team__image">
						</div>
						<div class="c-our-team__info">
							@if(!string.IsNullOrWhiteSpace(name))
							{
								<h3 class="c-our-team__info__name u-delta">@name</h3>
							}
							@if(!string.IsNullOrWhiteSpace(firstNumber) && !string.IsNullOrWhiteSpace(phone))
							{
								<a href="tel:@firstNumber.Replace(" ","")" class="c-our-team__info__ext">Ext: @phone</a>
							}
							@if(!string.IsNullOrWhiteSpace(job))
							{
								<p class="c-our-team__job">@job</p>
							}
							@if(!string.IsNullOrWhiteSpace(email))
							{
								<a href="mailto:@email" class="c-our-team__email">Email</a>
							}
						</div>
					}
				</div>
			}
		</div>
	</div>
</div>
